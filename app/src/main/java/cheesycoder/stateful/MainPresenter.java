package cheesycoder.stateful;import android.util.Log;import java.lang.ref.WeakReference;import cheesycoder.stateful.state.DisplayState;import cheesycoder.stateful.state.InitState;import cheesycoder.stateful.state.TypingState;/** * Created by jinwo on 2017-11-12. */public class MainPresenter implements MainContract.Presenter {    MainState mainState;    WeakReference<MainContract.View> view;    public MainPresenter(MainState mainState, MainContract.View view) {        this.view = new WeakReference<>(view);        if (mainState == null) {            mainState = new MainState(null);        }        this.mainState = mainState;        this.mainState.setPresenter(this);    }    @Override    public void resolveState(MainState state) {        if (view.get() != null) {            MainContract.View mainView = view.get();            if (state.getCurState() instanceof InitState) {                mainView.displayInit();            } else if (state.getCurState() instanceof DisplayState) {                mainView.displayResult(((DisplayState) state.getCurState()).getResult());            } else if (state.getCurState() instanceof TypingState) {                mainView.displayTyping();            } else {                Log.e("DEBUGGER", "No State is set");            }        }    }    @Override    public void startTyping(int charLength) {        mainState.startTyping(charLength);    }    @Override    public void startDisplayingResult(String result) {        mainState.startDisplayingResult(result);    }    @Override    public void stop() {    }    public MainState getState() {        return mainState;    }}